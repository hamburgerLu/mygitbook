# goldbach

[TOC]

## 1.简介

​	决策引擎系统旨在建设一套以业务人员为目标用户，同时具有可视化、独立运行、业务低耦合、标准化的系统工具。
* 业务人员使用：系统用户目标群体为各条线业务用户，做到使用期间最大程度的无需技术人员干预即可完成业务规则的维护。
* 可视化：系统提供业务规则维护可视化操作功能，供业务人员进行界面化规则配置。
* 独立运行：决策引擎系统自身功能不依赖于任何业务数据，以自身规则处理的优势对业务系统赋能。
* 业务低耦合：决策引擎系统定位为规则维护及处理工具，连接业务系统，但不依赖业务系统，自身不存储业务数据，仅需要维护业务规则。
* 标准化：决策引擎系统提供前端标准的参数输入系统，以及标准化的处理后输出接口，通过标准的输入输出，实现快速与业务系统的对接。

### 1.1系统间交互流程

![goldbach_1](.\img\goldbach_1.png)

### 1.2流程及功能说明
​	决策引擎主要分为如下几个模块，业务线，决策变量，规则，规则集，决策树

![goldbach_2](.\img\goldbach_2.png)


* 输入参数处理节点
	该节点主要执行原始参数的简单预处理功能，例如参数格式校验、参数长度校验、去除空格、去除特殊字符、特殊约定格式下的参数转化等功能。

* 输入解析节点
	该节点主要包含基本参数字段解析及复杂变量加工计算两部分功能：一、基本参数字段解析功能，不涉及变量的加工计算，将基本变量解析后执行变量的去除空格、去除特殊字符、类型转换、格式化等其他简单操作；二、变量工厂负责处理复杂变量的加工计算、承担外部变量的获取等职能；两部分功能执行后均自动将已处理的变量添加至待选决策变量。

* 规则执行节点
	该节点为系统核心部分，包含规则要素的基本维护功能，及已部署规则调用时的解析功能。其中规则基本要素的维护包含：决策变量维护、规则维护、规则集维护功能，上述功能均提供可视化界面供业务人员进行基本规则配置。规则解析功能主要为后台系统功能，无需提供可视化界面，负责将业务配置的可视化规则转化为程序语言并且执行逻辑处理，返回规则执行结果。

* 输出组装节点
	该节点主要负责将业务规则执行后返回的执行结果，包装成标准接口约定的格式返回至调用方。




## 2.业务线

​	“业务线”为系统中规则要素、数据的隔离容器，配置在一个业务线的所有决策变量、规则、规则集等其他规则要素仅对所属业务线有效；不同业务线的规则管理人员可通过系统业务线权限灵活配置可操作内容。决策引擎系统通过配置不同业务线的方式实现一个系统多业务管控。
​	系统支持可视化的业务线信息维护功能：业务线添加、编辑、删除、状态更新操作。

![业务线_1](.\img\业务线_1.png)



## 3.决策变量

​	决策变量是规则的基本组成要素，决策变量由业务用户从待选决策变量选择添加。用户可自定义决策变量名称、代码，编辑决策变量启用状态，添加决策变量业务相关备注描述。

​	系统支持可视化的决策变量信息维护功能：决策变量添加、编辑、删除、状态更新操作。

![决策变量_1](.\img\决策变量_1.png)



## 4.规则

​	规则是指业务用户使用决策变量、常量、赋值运算符、算术运算符、逻辑运算符、关系运算符组成的规则表达式和定义输出结果变量的集合。即一条完整的业务规则由决策变量、规则表达式、结果输出三个组成部分。

​	系统支持可视化的规则维护功能：规则添加、编辑、删除、状态更新操作。

![规则_1](.\img\规则_1.png)

​	具体的规则配置展示页：

![规则_2](.\img\规则_2.png)



## 5. 规则集

​	规则集为一组规则的打包集合，具有业务先后逻辑关系且在业务流程中均需要调用的规则可打包组成一个规则集。使用规则集打包方式可以确保规则调用时的完整性，同时兼具规则灵活性。

​	系统支持可视化的规则集维护功能：规则集添加、编辑、删除、状态更新操作，以及规则集内规则的添加、移除、规则集内规则优先级设置功能。

![规则集_1](.\img\规则集_1.png)



​	具体的规则集配置展示页：

![规则集_2](.\img\规则集_2.png)



## 6.决策树
​	决策树是若干规则和规则集的流程组合，加入了判断模块，可以处理分支判断，从而决定是否进行该分支的逻辑计算，告别硬编码，具有灵活性。

​	系统支持可视化的决策树维护功能：决策树添加、编辑、删除、状态更新操作，以及决策树内规则，规则集的拖拽功能实现，更加直观。

![决策树_1](.\img\决策树_1.png)

​	具体的决策树配置展示页：

![决策树_2](.\img\决策树_2.png)



## 7.计算逻辑
​	以上所有都是有UI界面的配置功能，计算功能中实现了常用的基本的运算操作符（加减乘除等），字符串操作，日期操作，布尔操作（大于小于等），数组操作等。